(this["webpackJsonpdaeun-mailbox"]=this["webpackJsonpdaeun-mailbox"]||[]).push([[0],{450:function(e,t,n){},451:function(e,t,n){},452:function(e,t,n){},453:function(e,t,n){"use strict";n.r(t);n(226),n(238);var a,c=n(2),r=n.n(c),i=n(108),s=n.n(i),l=n(53),u=n(52),o=n(225),d=n(221),j=n(32),m=n.n(j),b=n(222),f=n(42),h=n(141),O=n(456),x=n(455),v=n(62),p=n(140),_=n(110),N=n.n(_),g=function(){var e=Object(p.a)(m.a.mark((function e(){var t,n;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.next=7;break;case 3:return t=e.sent,e.abrupt("return",t.data);case 7:return e.next=9,N.a.get("".concat("https://raw.githubusercontent.com/daeun-react/mailbox/main/server/data.json"));case 9:return n=e.sent,e.abrupt("return",n.data.mails);case 11:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),I="LIGHT",w="DARK",E="inbox",y="trash",S=m.a.mark(L),k=m.a.mark(F),C="mail/SET_SECTION",T="mail/SET_READ",R="mail/SET_DELETE",G="mail/GET_ITEMS",M=Object(O.a)(C,(function(e){return e})),U=Object(O.a)(T,(function(e){return e})),A=Object(O.a)(R,(function(e){return e})),D=Object(O.a)(G);function L(e){var t,n,a;return m.a.wrap((function(c){for(;;)switch(c.prev=c.next){case 0:return t="".concat(e,"_SUCCESS"),n="".concat(e,"_FAILURE"),c.prev=1,c.next=4,Object(v.b)(g);case 4:return a=c.sent,c.next=7,Object(v.c)({type:t,payload:a});case 7:c.next=13;break;case 9:return c.prev=9,c.t0=c.catch(1),c.next=13,Object(v.c)({type:n,failure:!0,payload:c.t0});case 13:case"end":return c.stop()}}),S,null,[[1,9]])}function F(){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(v.d)(G,(function(){return L(G)}));case 2:case"end":return e.stop()}}),k)}var B={selectedId:1,section:E,items:{loading:!1,data:[],failure:null}},J=function(){return Object(h.a)(),h.b.apply(void 0,arguments)},H=Object(x.a)((a={},Object(f.a)(a,C,(function(e,t){var n=t.payload;return J(e,(function(e){e.section=n,e.selectedId=e.items.data.findIndex((function(e){return e.section===n}))+1}))})),Object(f.a)(a,T,(function(e,t){var n=t.payload;return J(e,(function(e){var t=e.items.data.findIndex((function(e){return e.id===n}));e.items.data[t].read=!0,e.selectedId=n}))})),Object(f.a)(a,R,(function(e,t){var n=t.payload;return J(e,(function(t){var a=t.items.data.findIndex((function(e){return e.id===n}));t.items.data[a].section=y;var c=e.items.data.findIndex((function(e){return e.section===E&&e.id!==n}));c>-1?(t.items.data[c].read=!0,t.selectedId=t.items.data[c].id):(t.items.data[0].read=!0,t.selectedId=1)}))})),Object(f.a)(a,G,(function(e,t){return J(e,(function(e){e.items={loading:!0,data:null,failure:null}}))})),Object(f.a)(a,"mail/GET_ITEMS_SUCCESS",(function(e,t){var n=t.payload;return J(e,(function(e){e.items={loading:!1,data:n,failure:null}}))})),Object(f.a)(a,"mail/GET_ITEMS_FAILURE",(function(e,t){var n=t.payload;return J(e,(function(e){e.items={loading:!1,data:null,failure:n}}))})),a),B),K=m.a.mark(P);function P(){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(b.a)([F()]);case 2:case"end":return e.stop()}}),K)}var V=Object(u.combineReducers)({mail:H}),W=n(224),q=n(3),z={theme:I},Q=function(e,t){switch(t.type){case w:return localStorage.setItem("theme",w),{theme:w};case I:return localStorage.setItem("theme",I),{theme:I};default:return e}},X=Object(c.createContext)(),Y=function(e){var t=Object(c.useReducer)(Q,z),n=Object(W.a)(t,2),a=n[0],r=n[1];return Object(q.jsx)(X.Provider,{value:{state:a,dispatch:r},children:e.children})},Z=n(36),$=n.n(Z),ee=n(85);var te=function(e){var t=e.data,n=e.section,a=e.onSectionChange,c=t.filter((function(e){return e.section===E&&"false"===e.read})).length,r=t.filter((function(e){return e.section===y})).length;return Object(q.jsx)("aside",{className:"sidebar",children:Object(q.jsxs)("ul",{className:"sidebar_container",children:[Object(q.jsx)("li",{onClick:function(){return a(E)},children:Object(q.jsxs)("button",{type:"button",className:$()({active:n===E}),children:[Object(q.jsxs)("span",{children:[Object(q.jsx)(ee.a,{}),Object(q.jsx)("span",{children:" \ubc1b\uc740 \uba54\uc77c\ud568 "})]}),Object(q.jsx)("span",{className:"count",children:c})]})}),Object(q.jsx)("li",{onClick:function(){return a(y)},children:Object(q.jsxs)("button",{type:"button",className:$()({active:n===y}),children:[Object(q.jsxs)("span",{children:[Object(q.jsx)(ee.b,{}),Object(q.jsx)("span",{children:" \uc9c0\uc6b4 \uba54\uc77c\ud568 "})]}),Object(q.jsx)("span",{className:"count",children:r})]})})]})})};var ne=function(e){var t=e.id,n=e.read,a=e.title,r=e.from,i=e.time,s=Object(l.b)(),u=Object(l.c)((function(e){return e.mail})).selectedId,o=Object(c.useContext)(X).state,d=Object(c.useRef)(null);return Object(c.useEffect)((function(){t===u&&d.current.scrollIntoView({behavior:"smooth",block:"center"})}),[t,u]),Object(q.jsxs)("div",{className:$()("mail_items",{selected:t===u},{theme_light:o.theme===I},{theme_dark:o.theme===w}),onClick:function(){s(U(t))},ref:d,children:[Object(q.jsx)("div",{className:"mail_items_trunc","data-read":n}),Object(q.jsx)("div",{className:"mail_items_title trunc",children:a}),Object(q.jsxs)("div",{className:"mail_items_sub",children:[Object(q.jsx)("span",{className:"mail_items_from trunc",children:r}),Object(q.jsx)("span",{className:"mail_items_time trunc",children:i.split(" ")[0]})]})]})},ae=n(223);var ce=function(e){var t=e.data,n=e.section,a=Object(c.useContext)(X).state;return Object(q.jsx)("div",{className:$()("mail_list",{theme_dark:a.theme===w}),children:t.filter((function(e){return e.section===n})).map((function(e){return Object(q.jsx)(ne,Object(ae.a)({},e),e.id)}))})};var re=function(e){var t=e.selectedItem,n=e.onGotoTrash,a=t.id,r=t.title,i=t.from,s=t.time,l=t.msg,u=t.section,o=Object(c.useContext)(X).state;return Object(q.jsxs)("div",{className:$()("mail_view",{theme_light:o.theme===I},{theme_dark:o.theme===w}),children:[Object(q.jsxs)("div",{className:"mail_view_header",children:[Object(q.jsx)("h3",{className:"mail_view_title",children:r}),u!==y&&Object(q.jsx)(ee.b,{className:"btn_delete",onClick:function(){return n(a)}}),Object(q.jsxs)("div",{className:"mail_sub",children:[Object(q.jsx)("div",{className:"mail_view_from",children:i}),Object(q.jsx)("div",{className:"mail_view_time",children:s})]})]}),Object(q.jsx)("div",{className:"mail_view_msg",children:l})]})};n(450);var ie=function(){var e=Object(l.c)((function(e){return e.mail})),t=e.selectedId,n=e.section,a=e.items,r=Object(l.b)();if(Object(c.useEffect)((function(){r(D())}),[r]),!a.data)return null;if(a.loading)return Object(q.jsx)("div",{className:"loading",children:"loading..."});if(a.failure)return Object(q.jsx)("div",{children:"error"});var i=a.data.filter((function(e){return e.id===t}));return Object(q.jsxs)(q.Fragment,{children:[Object(q.jsx)(te,{data:a.data,section:n,onSectionChange:function(e){return r(M(e))}}),Object(q.jsxs)("div",{className:"mail_container",children:[Object(q.jsx)(ce,{data:a.data,section:n}),0===i.length?Object(q.jsx)("div",{className:"mail_view",children:"\uba54\uc77c\uc774 \uc5c6\uc2b5\ub2c8\ub2e4."}):Object(q.jsx)(re,{selectedItem:i[0],onGotoTrash:function(e){return r(A(e))}})]})]})};n(451);var se=function(){var e=Object(c.useContext)(X),t=e.state,n=e.dispatch;return Object(q.jsx)("button",{type:"button",className:$()("btn_darkmode",{btn_light:t.theme===I}),onClick:function(){t.theme===I?n({type:w}):n({type:I})},children:"BUTTON"})};n(452);var le=function(){var e=Object(c.useContext)(X).dispatch;return Object(c.useEffect)((function(){var t=localStorage.getItem("theme");t||(t=window.matchMedia("(prefers-color-scheme: dark)").matches?w:I,localStorage.setItem("theme",t));t===w&&e({type:w}),t===I&&e({type:I})}),[e]),Object(q.jsxs)("div",{className:"main",children:[Object(q.jsx)(se,{}),Object(q.jsx)("div",{className:"mail_wrapper",children:Object(q.jsx)(ie,{})})]})},ue=Object(o.a)(),oe=Object(u.createStore)(V,Object(d.composeWithDevTools)(Object(u.applyMiddleware)(ue)));ue.run(P),s.a.render(Object(q.jsx)(r.a.StrictMode,{children:Object(q.jsx)(Y,{children:Object(q.jsx)(l.a,{store:oe,children:Object(q.jsx)(le,{})})})}),document.getElementById("root"))}},[[453,1,2]]]);
//# sourceMappingURL=main.d83cabdc.chunk.js.map